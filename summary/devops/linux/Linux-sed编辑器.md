# sed编辑器

## vi编辑器和sed编辑器

vi编辑器只能修改内容，比如说我们要将一个文件的文本输出，但是我们要修改输出的内容，我们就需要用vi编辑器进入内容编辑文本，然后重新输出才行。sed编辑器不光可以修改内容，还可以利用管道符直接接收命令结果，然后进行结果的替换等。

## sed具体操作

sed既可以只对输出的内容进行修改，同时也可以对文件里头的内容进行改动（加上-i参数）。

1. `sed '2p' test`

   ```shell
   [root@localhost ~]# sed '2p' test
   ID Name Gender Mark
   10 王武 男 60
   10 王武 男 60
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   可以看到，确实是将第二行输出了，但是其他行也被输出了。正确的使用应该是使用`sed -n`让只经过sed处理的行去执行打印动作。

   ```shell
   [root@localhost ~]# sed -n  '2p' test
   10 王武 男 60
   ```

2. sed只要不是在-i模式下，都不会影响文件本身的内容。下面我们来删除输出结果的2到4行。

   ```shell
   [root@localhost ~]# sed '2,4d' test
   ID Name Gender Mark
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   使用动作`d`表示要删除，再加上参数`2,4`的意思就是，用sed编辑器将test的文本内容取出来，然后删除掉2到4行的内容。

3. ```shell
   [root@localhost ~]# sed '2a after' test
   ID Name Gender Mark
   10 王武 男 60
   after
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   使用动作`a`表示要往后插入一行，再加上参数`2`的意思就是，用sed编辑器将test的文本内容取出来，并在第二行之后插入一行，写上after的文本。

4. ```shell
   [root@localhost ~]# sed '2i before' test
   ID Name Gender Mark
   before
   10 王武 男 60
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   使用动作`i`表示要往前插入一行，再加上参数`2`的意思就是，用sed编辑器将test的文本内容取出来，并在第二行之前插入一行，写上before的文本。

5. ```shell
   [root@localhost ~]# sed '2c replace' test
   ID Name Gender Mark
   replace
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   使用动作`c`表示要替换某一行的文本，加上参数`2`的意思就是，用sed编辑器将test的文本内容取出来，并将第二行文本替换，写上replace的文本。

6. ```shell
   [root@localhost ~]# sed '2s/男/女/g' test
   ID Name Gender Mark
   10 王武 女 60
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   使用动作`s`表示要替换某个字符串，`sed '2s/男/女/g' test`的意思就是，用sed编辑器将test的文本内容取出来，并将第二行文本中的字符串“男”替换成“女”。这样一来王武就变成女的了。

7. ```shell
   [root@localhost ~]# sed -i '2s/男/女/g' test
   [root@localhost ~]# cat test
   ID Name Gender Mark
   10 王武 女 60
   11 李牧 男 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   我们也可以使用`-i`模式，直接对文件里头的内容进行替换。`sed -i '2s/男/女/g' test`的意思就是，这一次sed请你帮我直接替换文件里头的内容，而不是提取出文件的内容在屏幕输出时进行替换。替换掉第2行里头的“男”变成“女”。

8. ```shell
   [root@localhost ~]# sed -e '2s/男/女/ ; 3s/男/女/' test
   ID Name Gender Mark
   10 王武 女 60
   11 李牧 女 54
   12 费翔 男 78
   13 马里 男 98
   14 凤娇 女 87
   15 雨濛 女 84
   ```

   我们还可以使用`-e`模式，对提取出来的文件内容，进行多个操作。`sed -e '2s/男/女/ ; 3s/男/女/' test`的意思就是sed编辑器当你提取出文本内容的时候请你做多个操作：第一个操作时对第2行的文本内容的“男”换“女”，对第3行的文本内容的“男”也换“女”。
