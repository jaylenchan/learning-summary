# 文件系统管理

## 分区类型

主分区：最多只有4个
扩展分区：为了突破主分区只有4个的限制，设计出了扩展分区。但是同样的，有了扩展分区，扩展分区+主分区的数目同样不能超过4个的限制
逻辑分区：在扩展分区中划分出来的分区，可以进行数据格式化并使用

### 主分区、扩展分区、逻辑分区的联系

主分区就好像一个柜子，买来的时候就是厂家设计好了柜子的隔层，比方说有4个隔层，每个隔层用来放置不同种类的东西。从目前的隔层情况来看，我们最多只能放置4种不同种类的东西进去。但是我们的实际需求是想要往这个柜子里头放置6个种类的东西。此时，假设我们一个个种类的放，还会多余出来2个种类的东西。我们的设计方案是，将第4个隔层拿出来，当作扩展隔层，人为地在里头用塑料板隔出3个新的空间，这样子我们就总共有3+（1+1+1）=6个空间，就可以满足我们的需求了。所以，逻辑分区是基于扩展分区划分出来的，扩展分区就只是为了隔出来多个逻辑分区的，并不会放具体的数据。而物理上来看，主分区+扩展分区总是4个。

### 查看分区的占用情况

`df -h`

### 统计某个目录的总大小

`du -sh directoryName`

### 显示磁盘状态

`dumpe2fs /dev/sda1`

## 挂载

每一个硬盘都会对应着一个设备文件名，同时我们对每一个硬盘都需要一个挂载点，告诉我们从哪里可以访问这个硬盘。于是我们就需要将这个挂载点和硬盘的设备文件名关联起来，而这个关联的过程就叫做挂载。

### 挂载命令

`mount -l 分区名`可以查询出当前指定分区名所挂载的挂载点是谁，当然只有已经挂载的才会有输出结果显示出来。

`mount -a`  输入此命令，linux会依据配置文件`/etc/fstab`的内容，去进行自动挂载。
**应用场景**：分区是开机的时候自动挂载的，但是光盘、U盘、硬盘并不会自动挂载，如果想要自动挂载就需要这条命令应用上了。（但是，一般情况下光盘不可能总是在光驱里头，如果要是linux开机检测不到，没法自动挂载的话，系统就会崩溃！）

`mount 设备文件名 挂载点`将设备文件名和挂载点链接起来。

`mount -o remount,noexec /home`重新挂载已经挂载的/home这个挂载点所对应的分区，并且传递了参数该文件系统中的文件都没法执行。于是即使你是root用户，即使你的文件具有执行权限，一样没法执行。因为这根本不是权限指定的问题，是文件系统层面限制执行的问题。

### 挂载光盘

1. 给要挂载的光盘创建挂载点（或者叫做创建一个盘符）。linux当中挂载点就是一个空目录，创建一个空目录就是创建一个挂载点（只要是一个空目录，都是可以用来作为挂载点使用的）。linux其实已经提前为我们准备了`/media` 和 `/mnt`两个目录用来挂载光盘和U盘。其中`/media`用来挂载光盘，`/mnt`用来挂载U盘。但是其实啥空目录都可以达到同样的挂载目的。

2. 将光盘放入光驱。

3. 查找光盘的设备文件名，为挂载作准备。这个设备文件名，要么是`/dev/cdrom`，要么是`/dev/sr0`。为啥会有两个设备文件名呢？其实`cdrom`只是`sr0`的一个软链而已啦！

4. 给设备文件分配盘符。`mount -t iso9600 /dev/cdrom /media`  其中`-t iso9600`就是光盘默认的文件系统。挂载光盘要手动的给设备文件指定文件系统。不过，既然这是默认的文件系统，那我们也是可以直接`mount /dev/cdrom /media` 的啦！

5. 挂载好后，我们就可以从挂载点去访问光盘了。当我们使用完之后，我们还需要人为手动的用`unmount /dev/cdrom`去卸载光盘（`umount 设备文件名 / 挂载点`都能达到卸载光盘的目录）。

## 分区

`fdisk /dev/sdb`就可以为新的硬盘进行分区
