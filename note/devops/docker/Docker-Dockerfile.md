# Dockerfile

## Dockerfile运行原理



## 指令

|     指令     |                             作用                             |
| :----------: | :----------------------------------------------------------: |
|    `FROM`    |             当前镜像是基于什么基础镜像开始构建的             |
|    `RUN`     | 构建当前镜像的时候想要执行什么指令（可以给一些基础镜像增加一些工具） |
|   `EXPOSE`   | 当前镜像以后启动的容器要暴露哪个端口（只有暴露了，才能够在以后去映射） |
|  `WORKDIR`   | 当前镜像以后要启动的容器在进入容器后的目录首先是谁（即`docker exec -it 容器 /bin/bash`进去后第一个看到的目录是哪个地方）这个指令可以指定一个绝对路径，也可以是一个相对路径。如果是一个相对路径的话，这个相对路径是相对于之前的WORKDIR的路径的。 |
|    `ENV`     | 用来在构建镜像过程中设置环境变量（这样子就可以在下边阶段的指令中去使用环境变量了） |
|    `ADD`     | 用来把宿主机下的文件拷贝到镜像里头(不仅仅是拷贝，功能更强大，如果是压缩文件，还会自动帮你解压缩放入镜像) |
|    `COPY`    |   用来把宿主机下的文件拷贝到镜像里头(仅仅是拷贝，啥都不干)   |
|   `VOLUME`   |                  容器数据卷，用于数据持久化                  |
|    `CMD`     | 指定一个容器在启动的时候要运行什么命令（可以写无数个，但只有1个CMD会生效，所以写多没卵用，CMD会被`docker run`之后的参数替换掉）比如`docker run xxx ls /data`就会把CMD的命令替换成启动时执行`ls /data` |
| `ENTRYPOINT` |            指定一个容器在启动的时候要运行什么命令            |
|              |                                                              |

